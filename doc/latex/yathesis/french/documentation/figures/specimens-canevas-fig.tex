\tikzset{
    every node/.style={
      font=\ttfamily,
    }
}

\tikzset{
  fromrootstyle/.style={
    edge from parent fork down,
    growth parent anchor=west,
    style={sibling distance=60mm}
  }
}

\tikzset{
  treestyle/.style={
    grow via three points={
        one child at (0.8,-0.725) and two children at (0.8,-0.75) and (0.8,-1.5)
    },
    edge from parent path={
        ($(\tikzparentnode\tikzparentanchor)+(2ex,0pt)$) |- (\tikzchildnode\tikzchildanchor)%^^A|
    },
    anchor=west,
    growth parent anchor=west,
    parent anchor=south west
  }
}

\hypersetup{hidelinks}
%
\begin{tikzpicture}
  \node[fill=doc] {
    \meta{dossier de documentation de \yat{}}
  }
  child[
  fromrootstyle,
  nodes={fill=specimens}
  ] { node (t1) {%
      \global\def\folder{specimens}%
      \directorytree%
    }
    child[treestyle] { node (a4) {%
        \global\def\subfolder{a-plat}%
        \subdirectorytree%
      }
      child {node {\etctree} }
      child {node (a5) {\pdffiletree{these}} }
      child {node {\etctree} }
    }
    child [missing] {}
    child [missing] {}
    child [missing] {}
    child[treestyle] { node (a6) {\zipfiletree}}
    child[treestyle] { node (a1) {%
        \global\def\subfolder{en-arborescence}%
        \subdirectorytree%
      }
      child {node {\etctree} }
      child {node (a2) {\pdffiletree{these}} }
      child {node {\etctree} }
    }
    child [missing] {}
    child [missing] {}
    child [missing] {}
    child[treestyle] { node (a3) {\zipfiletree} }
  }
  child[fromrootstyle,nodes={fill=canevas}] { node (t2) {%
      \global\def\folder{canevas}%
      \directorytree%
    }
    child[treestyle] { node (b4) {%
        \global\def\subfolder{a-plat}%
        \subdirectorytree%
      }
      child {node {\etctree} }
      child {node (b5) {\pdffiletree{these}} }
      child {node {\etctree} }
    }
    child [missing] {}
    child [missing] {}
    child [missing] {}
    child[treestyle] { node (b6) {\zipfiletree} }
    child[treestyle] { node (b1) {%
        \global\def\subfolder{en-arborescence}%
        \subdirectorytree%
      }
      child {node {\etctree} }
      child {node (b2) {\pdffiletree{these}} }
      child {node {\etctree} }
    }
    child [missing] {}
    child [missing] {}
    child [missing] {}
    child[treestyle] { node (b3) {\zipfiletree} }
  };
  \begin{pgfonlayer}{background}
    \node[fit=(a1)(a2)(a3)(a4)(a5)(a6)(b1)(b2)(b3)(b4)(b5)(b6)(t1)(t2),
    inner sep=0,line
    width=0] (glob) {};
    %^^A
    \node [
      fill=a-plat,
      draw=a-plat,
      fit=(a4)(a5)(a6)(b4)(b5)(b6)(glob.east |- a4) (glob.west |- a4),
      inner xsep=.75mm,
      inner ysep=.75mm
    ] (a-plat_zone) {};
    \node[
      fill=a-plat,
      draw=a-plat,
      above=.5cm of a-plat_zone.north east,
      text width=3.5cm,
      align=center,
      font=\rmfamily
    ] (a-plat_zone_label)
    {Spécimen et canevas\\\enquote{à plat}};
    \draw[
      ->,
      color=a-plat,
      thick
    ] (a-plat_zone_label) to [out=-60,in=0] (a-plat_zone);
    %^^A
    \node[
      fill=en-arborescence,
      draw=en-arborescence,
      fit=(a1)(a2)(a3)(b1)(b2)(b3)(glob.east |- a1) (glob.west |- a1),
      inner xsep=.75mm,
      inner ysep=.75mm,
    ] (en-arborescence_zone) {};
    \node[
      fill=en-arborescence,
      draw=en-arborescence,
      below=.5cm of en-arborescence_zone.south east,
      text width=3.5cm,
      align=center,
      font=\rmfamily
    ] (en-arborescence_zone_label)
    {Spécimen et canevas \enquote{en arborescence}};
    \draw[
      ->,
      color=en-arborescence,
      thick
    ] (en-arborescence_zone_label) to [out=60,in=0] (en-arborescence_zone);
  \end{pgfonlayer}
\end{tikzpicture}

\iffalse
%%% Local Variables:
%%% mode: latex
%%% eval: (latex-mode)
%%% ispell-local-dictionary: "fr_FR"
%%% TeX-engine: xetex
%%% TeX-master: "../yathesis.dtx"
%%% End:
\fi
