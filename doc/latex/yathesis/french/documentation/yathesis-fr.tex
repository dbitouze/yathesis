% Pour imprimer la présente documentation 2 pages sur 1 :
% pdfnup --nup 2x1 --landscape yathesis.pdf --trim '1.9cm 3.5cm 1.9cm 1.9cm' --suffix 2x1
%
\documentclass[english,french]{report}
\usepackage{ltxtable}%
\usepackage{denisbdoc}
\usepackage{dirtree}
\usepackage[a4paper]{geometry}%
\usepackage[lining]{libertine}
\renewcommand{\ttdefault}{lmtt}
%
\input{sections/fixed-footnotes}
%
\tcbset{index command name=commands}
\makeindex[title=Index des commandes,columnseprule,options=-M denisbdoc.xdy -L french,intoc,name=commands]
\makeindex[title=Index des concepts,columnseprule,options=-M denisbdoc.xdy -L french,intoc]
%
\lstMakeShortInline[style=dbtex]|
% \tcbset{listing options={escapechar=+}}
%
\newcommand\expression[3]{%
  \AtBeginDocument{%
    \deftranslation[to=French]{lbl-#1}{#2}%
    \deftranslation[to=English]{lbl-#1}{#3}%
    \deftranslation[to=French]{#1}{#2}%
    \deftranslation[to=English]{#1}{#3}%
  }%
}%
%
\newbool{YAD@in@footnote}%
\makeatletter
\let\YAD@ori@footnote\footnote
\renewcommand{\footnote}[1]{%
  \booltrue{YAD@in@footnote}%
  \YAD@ori@footnote{#1}%
  \boolfalse{YAD@in@footnote}%
}%
\newcommand\YADfootnote[1]{%
  \ifbool{YAD@in@footnote}{%
    \space(#1)%
  }{%
    \footnote{%
      \boolfalse{YAD@in@footnote}%
      #1%
    }%
  }%
}%
\newcommand{\translateexpression}{%
  \@ifstar{\@tempswatrue\csuse{YAD@starnostar@translateexpression}}{\@tempswafalse\csuse{YAD@starnostar@translateexpression}}%
}%
\newcommand{\YAD@starnostar@translateexpression}[1]{%
  \enquote{\foreignlanguage{french}{\translate{#1}}} ou
  \enquote{\foreignlanguage{english}{\translate{#1}}}%
  \if@tempswa%
  \else%
  \selonlangue%
  \index{expression!en français!\enquote{\foreignlanguage{french}{\translate{#1}}}}%
  \index{expression!en anglais!\enquote{\foreignlanguage{english}{\translate{#1}}}}%
    % \YADfootnote{%
    %   \ifbool{YAD@in@footnote}{%
    %     selon%
    %   }{%
    %     Selon%
    %   }%
    %   \space que la langue principale de la thèse, ou que la langue en cours, est
    %   le français ou l'anglais. Cf. \vref{sec-expressions-cles} pour plus de
    %   précisions%
    %   \ifbool{YAD@in@footnote}{%
    %   }{%
    %     .%
    %   }%
    % }%
  \fi%
}%
\makeatother
%
\loadglsentries{glossaries/glossary}
\loadglsentries{glossaries/acronyms}
\addbibresource{yathesis-fr.bib}
%
\InputIfFileExists{translations}{}{}
%
\InputIfFileExists{includeall-includeonly}{}{}
%
% Some hacks to avoid "\makeindex"'s “title” option from \pkg{imakeidx} ignored
% if \pkg{tcolorbox}' indexation is used (see
% \url{http://tex.stackexchange.com/q/332284/18401})).
\expandafter\AtBeginDocument\expandafter{%
  \expandafter\def\expandafter\theindex\expandafter{\theindex}%
}
\expandafter\AtBeginDocument\expandafter{%
  \expandafter\def\expandafter\endtheindex\expandafter{\endtheindex}%
}
%
\AfterEndPreamble{%
  \RecordChanges%
  \renewcommand*{\glossaryname}{Historique des changements}
  \GlossaryPrologue{%
    \chapter{\glossaryname}\label{cha-history}
    L'auteur a eu le souci constant d'assurer la compatibilité ascendante de la
    \yatCl{}. Cependant, pour répondre à des demandes de fonctionnalités jugées
    légitimes, quelques rares changements (signalés \alert{en rouge}
    ci-dessous) cassent cette compatibilté en ce sens que certains anciens
    documents peuvent éventuellement :
    \begin{itemize}
    \item soit ne plus compiler sans quelques ajustements. Dans ce cas, les
      remèdes sont indiqués en note de bas de page du changement concerné ;
    \item soit voir leur mise en page modifiée, en général légèrement. Dans ce
      cas, les pages concernées sont indiquées.
    \end{itemize}
  }%
  \changes{v0.99o}{2016-10-16}{Documentation révisée}%
  \changes{v0.99o}{2016-10-16}{Correction de bugs}%
  \changes{v0.99n}{2016-06-11}{Documentation révisée}%
  \changes{v0.99m}{2016-05-22}{Documentation révisée}%
  \changes{v0.99m}{2016-05-22}{Documentation compilable au moyen de pdflatex}%
  \changes{v0.99l}{2014-10-23}{Documentation révisée}%
  \changes{v0.99k}{2014-10-01}{Documentation révisée}%
  \changes{v0.99k}{2014-10-01}{Corrections de bugs}%
  \changes{v0.99j}{2014-07-18}{Documentation révisée}%
  \changes{v0.99j}{2014-07-18}{Corrections de bugs}%
  \changes{v0.99i}{2014-07-17}{Documentation révisée}%
  \changes{v0.99i}{2014-07-17}{Corrections de bugs}%
  \changes{v0.99h}{2014-07-14}{Documentation révisée}%
  \changes{v0.99h}{2014-07-14}{Corrections de bugs}%
  \changes{v0.99g}{2014-07-13}{Documentation révisée}%
  \changes{v0.99g}{2014-07-13}{Corrections de bugs}%
  \changes{v0.99c}{2014-06-06}{Corrections de bugs}%
  \changes{v0.99c}{2014-06-06}{Documentation révisée}%
  \changes{v0.99b}{2014-06-02}{Corrections de bugs}%
  \changes{v0.99a}{2014-06-02}{Corrections de bugs}%
  \changes{v0.99}{2014-05-18}{Corrections de bugs}%
}%
%
\AtEndDocument{%
  % Some hack against point 1 of this issue: \url{https://github.com/ho-tex/oberdiek/issues/12}
  \cleardoublepage
  \phantomsection
  %
  \indexprologue{%
    Dans cet index, les couleurs spécifient la nature :
    \begin{itemize}
    \item commande ;
    \item environnement ;
    \item clé ;
    \item valeur de clé ;
    \end{itemize}
    des entrées (selon la convention précisée \vref{sec-comm-envir-cles}).%
  }%
  \printindex[commands]
  %
  % Some hack against point 1 of this issue: \url{https://github.com/ho-tex/oberdiek/issues/12}
  \cleardoublepage
  \phantomsection
  %
  \indexprologue{%
    \changes{v0.99o}{2016-10-16}{Index des concepts}%
    Dans cet index, un numéro de page :
    \begin{description}
    \item[en gras] indique une page contenant une information importante sur
      l'entrée correspondante, par exemple sa définition ;
    \item[en italique] indique une page contenant un exemple qui illustre
      l'entrée correspondante.
    \end{description}
  }%
  \printindex
}
%
\begin{document}
% \settocdepth{subparagraph}
\include{sections/titre}
\include{sections/abstract}
\tableofcontents
\setsecnumdepth{none}%
\include{sections/introduction}
\setsecnumdepth{subsection}
\include{sections/proprietes-document}
\include{sections/pages-titre}
\include{sections/pages-liminaires}
\include{sections/pages-corps}
\include{sections/pages-annexes}
\include{sections/pages-finales}
\include{sections/personnalisation}
\appendix
\include{sections/installation}
\include{sections/specimens-canevas}
\include{sections/recommandations}
\include{sections/faq}
\include{sections/fichiers-charges}
\include{sections/packages-charges}
\include{sections/incompatibilites-connues}
\include{sections/aspects}
\include{sections/notations}
\include{sections/add-ons}
\include{sections/usage-avance}
\include{sections/developpements}
\PrintChanges%
\printbibliography[heading=bibintoc]
\printglossary[title=Glossaire]\label{glossaire}
\begingroup
\setlength{\parskip}{0pt plus .1pt}
\listoffigures
\listoftables
\endgroup
\tcblistof[\chapter*]{dbwarninglist}{Table des avertissements\addcontentsline{toc}{chapter}{Table des avertissements}}%
\tcblistof[\chapter*]{dbremarklist}{Table des remarques\addcontentsline{toc}{chapter}{Table des remarques}}%
\tcblistof[\chapter*]{dbexamplelist}{Table des exemples\addcontentsline{toc}{chapter}{Table des exemples}}%
\tcblistof[\chapter*]{dbfaqlist}{Table des questions\addcontentsline{toc}{chapter}{Table des questions}}%
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
